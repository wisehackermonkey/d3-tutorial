<!DOCTYPE html>
<html>
<head>
	<title>d3 tutorial</title>

	<script src="lib/d3.min.js">
		console.log("D3 script has loaded");
	</script>

    <script src=sketch.js></script>
    <style type="text/css">
    	body{
    		background-color: #ccc;
    		width: 100%;
    	}

    	#chart{
    		background-color: #ccc;
    		width: 1000px;
    		height: 500px;
    		margin:	50px auto;
    		border: solid 1px #000;
    	}
    	svg{
    		background-color: #fff;
    	}
    	.dot{
    		stroke: #000;
    		stroke-width: 1px;
    	}
    </style>
</head>
<body>

	<div id="chart"></div>
	<script type="text/javascript">
		var width = 1000;
		var height = 500;
		var margin = 30;

		var circle;

		//add svg to the div with class 'chart'
		//set the svg's width and height
		var svg = d3.select('#chart')
			.append('svg')
			.attr('width', `${width}px`)
			.attr('height', `${height}px`);





		//load csv from file named 'boston-housing.csv'
		d3.csv('boston-housing.csv', function(error,d) {
			if(error){
				console.log(error);
			}


			//show table form of csv file
			//console.table(d);
 
			xMinMax = d3.extent(d, function(d){
				return parseFloat(d.poor);
			});
			//console.table(xMinMax);
			// yMinMax = d3.extent(d, function(d){
			// 	return parseFloat(d.rooms);
			// });
			// rMinMax = d3.extent(d, function(d){
			// 	return parseFloat(d.value);
			// });

			//map the largest values and the lowest 
			//values within the graph to
			//fit within Min xMinMax[0], Max xMinMax[1]
			xScale = d3.scaleLinear()
				.domain([xMinMax[0],xMinMax[1]])   //X : width
				.range([margin,width - margin]); //Y : height


			//add circles based on the csv file's
			//'poor' column and 'nox' column
			//put the circles at x:poor[N], y:nox[N]
			circle = svg.selectAll('.dot')
				.data(d)
				.enter()
				.append('circle')
				.attr('class', 'dot' )
				.attr('cx', function(d) { 
					return xScale(d.poor); 
				})
				.attr('cy', function(d) {
				 return d.rooms * 50; 
				})
				.attr('r', function(d) { 
					return d.value/2; 
				})
				.attr('fill', '#000')
				.style('opacity', '0.5');

		});
	</script>
</body>
</html>
